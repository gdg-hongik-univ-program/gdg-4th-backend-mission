# 2주차 WIL

## 프로그램의 모듈화
- 프로그래밍을 할 때, 문제가 복잡하다면, 그 문제를 작은 문제들로 나눠서 해결하는 방식을 자주 사용한다. 이 때 이 작은 문제들을 **모듈**이라고 한다.
- 모듈은 하나의 독립적인 기능 또는 역할을 하는 코드의 단위로서, 함수나 클래스, 패키지, 컴포넌트, 프로그램 등이 될 수 있다.
- 모듈간의 높은 독립성은 좋은 프로그램의 기준이 될 수 있으며, 결합도와 응집도로 표현할 수 있다.

## 결합도 (Coupling)
- 결합도란, 한 모듈이 다른 모듈에 얼마나 의존하고 있는지를 나타내는 척도이다.
- 예를 들어, 회사에서 디자인팀이 홈페이지 배너를 꾸미려고 한다. 이 때 개발팀의 코드를 직접 수정하여 배너를 바꾸는 경우를 생각해보자. 디자인팀은 개발팀의 내부 시스템에 대해 잘 알고있어야 한다. 또 개발팀의 코드 구성이 바뀐다면, 디자인 팀의 업무는 마비될 것이다. 이런 경우 디자인팀과 개발팀은 완전히 분리되어있지 않고, 결합도가 높은 회사인 것이다.
- 반대로, 디자인팀은 배너 디자인을 하고 완성된 디자인을 개발팀에 넘겨준 뒤, 개발팀이 이를 구현한다면, 디자인팀은 개발팀 내부 사정까지 알 필요가 없어진다. 당연히 이 경우가 훨씬 효율적일 것이다. 이 회사는 결합도가 낮은 회사이다.
- 프로그래밍을 할 때에도 모듈끼리 낮은 결합도를 갖도록 해야 좋은 프로그램이 될 것이다.

## 응집도 (Cohsion)
- 응집도란, 한 모듈이 하나의 책임 또는 기능에 얼마나 집중되어 있는지를 나타내는 척도이다. 
- 이번에도 회사로 예를 들면, 하나의 부서가 너무 많은 일을 하는 경우를 생각할 수 있다. 개발팀이 인사, 회계, 디자인 업무를 모두 하는 회사가 있다면, 일의 효율이 떨어질 것이고, 특정 기능을 테스트하고 개선하는 것이 어려울 것이다. 이런 회사는 낮은 응집도를 가진 회사이다.
- 반대로, 부서별로 역할이 명확하다면 각 부서는 자신의 업무를 확실히 할 수 있을 것이고, 어디에서 어떤 문제가 생겼는지 명확히 알 수 있을 것이다. 이것이 높은 응집도이다.
- 높은 응집도를 가지는 프로그램은 그렇지 않은 프로그램보다 유지보수가 쉽고, 확장성이 높다.

## SOLID 원칙
| 원칙 | 핵심 키워드 |
|------|-------------|
| SRP (Single Responsibility Principle, 단일 책임 원칙) | 하나의 모듈은 하나의 책임만 가진다. |
| OCP (Open/Closed Principle, 개방-폐쇄 원칙) | 확장엔 열려 있고, 변경엔 닫혀 있어야 한다. |
| LSP (Liskov Substitution Principle, 리스코프 치환 원칙) | 부모 클래스는 자식 클래스로 대체 가능해야 한다. |
| ISP (Interface Segregation Principle, 인터페이스 분리 원칙) | 큰 인터페이스 하나보다는 분리된 작은 인터페이스 여러 개가 좋다. |
| DIP (Dependency Inversion Principle, 의존 역전 원칙) | 구체 구현이 아닌 추상(인터페이스)에 의존해야 한다. |

## 코드 리팩토링
- 현재 내가 만든 CRUD 프로젝트는 item 에 모든 기능이 구현돼있다. 이렇게 구현하면 안될 것 같다는 것을 직감적으로 알았지만, item, user, puchase, reservation을 각각 구현한 뒤 1:N 연결, 1:1 연결 등을 모두 구현할 자신이 없었고, 일단 1주차 과제에서 구현해야 할 기능들이 모두 item에 관한 것이었기 때문에 일단 item에 몰아서 구현해뒀었다. 
- 이렇게 구현했을 때의 문제점 :
  - SRP 위반 : Item 이 모든 로직을 처리하고 모든 책임을 진다.
  - OCP 위반 : 예를 들어 회원가입 기능을 추가하려면 모든 클래스를 수정해야 할 것이므로 확장에 열려있지 않고, 변경에 닫혀있지 않다.
  - 높은 결합도 : 여러 기능이 하나의 패키지 안에 구현돼있어서 클래스간의 결합도가 높고, 모듈 독립성이 없다. 즉, 어떤 기능 하나를 수정하려 하면 Item 패키지 안의 모든 코드를 수정해야 할 것이다.
  - 낮은 응집도 : Item이 너무 많은 일을 한다. 하는 일이 분리돼 있지 않고, Item 에서 모든 로직을 처리하니 비효율적이고 복잡한 프로그램이 될 것이다.
- 개선 방향 :
  - Item 패키지 내에 구현된 기능들을 다른 패키지로 분배한다. 구매 관련 로직 (buy)는 purchase에 구현하고, 예약 시스템에 관련된 로직을 새로 추가하여 reservation에 구현한다. 사용자에 대한 정보는 user에서 구현한 뒤, 회원가입, 탈퇴 등의 기능을 확장할 수 있도록 한다.